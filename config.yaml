sources:
  - name: codex
    enabled: true
    path: ~/.codex
    pattern: "*.jsonl"
    options:
      use_connector: true
      include_globs:
        - "history.jsonl"
        - "sessions/**/*.jsonl"

  - name: claude
    enabled: true
    path: ~/.claude
    pattern: "*.jsonl"
    options:
      use_connector: true
      include_globs:
        - "history.jsonl"
        - "projects/**/*.jsonl"
      exclude_globs:
        - "**/subagents/*.jsonl"

  # - name: cursor
  #   enabled: true
  #   path: ./ingest/cursor
  #   pattern: "*.jsonl"

  # - name: terminal
  #   enabled: true
  #   path: ./ingest/terminal
  #   pattern: "*.log"

  - name: imessage
    enabled: true
    path: ./ingest/imessage
    pattern: "*.jsonl"
    options:
      mode: sqlite # sqlite | jsonl
      db_path: ~/Library/Messages/chat.db
      limit: 500
    include_contains: []
    exclude_contains: []
    include_groups: []
    exclude_groups: []
    include_actors: []
    exclude_actors: []
    since_ts:
    until_ts:

store:
  backend: sqlite # sqlite | memory
  dsn: sqlite:///./data/amnesia.db

daemon:
  poll_interval_seconds: 5
  state_path: ./.amnesia_state.yaml

exports:
  enabled: true
  daily_dir: ./exports/daily
  skills_dir: ./exports/skills
  memory:
    enabled: true
    mode: openclawd
    output_dir: ./exports/memory
    formats: ["md"]
    daily: true
    weekly: true
    monthly: true
    per_project: false
    project_index: true
    llm_enabled: true
    llm_model: gpt-5-nano
    llm_max_tokens: 10000
    prompts:
      system_daily: |
        You are Open Amnesia. Summarize the day using ONLY the payload.
        If signal is weak, return exactly: "No summary: insufficient signal."
        Write in this structure:
        1) Highlights (2-4 bullets, concrete events/decisions)
        2) Decisions (bullets, only if present)
        3) Next Actions (bullets, only if present)
        4) Risks/Notes (bullets, only if present)
        Avoid repeating project lists or raw counts.
        Each Highlight must include at least 2 concrete items from the payload
        (e.g., cluster summary phrases, skill names, or specific entity values).
      system_weekly: |
        You are Open Amnesia. Summarize the week using ONLY the payload.
        If signal is weak, return exactly: "No summary: insufficient signal."
        Write in this structure:
        1) Themes (2-5 bullets)
        2) Key Decisions (bullets, only if present)
        3) Progress (bullets, only if present)
        4) Next Actions (bullets, only if present)
        5) Risks/Notes (bullets, only if present)
        Avoid repeating project lists or raw counts.
        Each Theme must include at least 2 concrete items from the payload
        (e.g., cluster summary phrases, skill names, or specific entity values).
      system_monthly: |
        You are Open Amnesia. Summarize the month using ONLY the payload.
        If signal is weak, return exactly: "No summary: insufficient signal."
        Write in this structure:
        1) Milestones (2-5 bullets)
        2) Decisions (bullets, only if present)
        3) Progress (bullets, only if present)
        4) Next Actions (bullets, only if present)
        5) Risks/Notes (bullets, only if present)
        Avoid repeating project lists or raw counts.
        Each Milestone must include at least 2 concrete items from the payload
        (e.g., cluster summary phrases, skill names, or specific entity values).
      user: |
        Payload (JSON) to summarize:
        {payload}

hooks:
  plugins: []

e2e:
  mode: recent
  since_days: 60
  discovery_limit: 500
  log_level: INFO
